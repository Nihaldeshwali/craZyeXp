<!-- We sould Never use Angular JS in Django Tempalte
AS WE LIKE CLEAN Code
-->


<html>
<head> 
<title> Code Test Share | The clean Code </title>
  <!-- My Own Utls -->
  <script src="/media/js/jquery.min.js"></script>
  <script src="/media/js/concat.js"></script>
  <script src="/media/js/utils.js"></script>
 
  <link rel="stylesheet" type="text/css" href="/media/css/concat.css">
  <link rel="stylesheet" type="text/css" href="/media/css/jquery-ui.css">
  
  <!-- Draggable Div -->
  <script src="/media/js/jquery.min.js"></script>
  <script src="/media/js/jquery-ui.min.js"></script>
  <script src="/media/js/jquery.browser.js"></script>
</head>

<body onkeypress="return showKeyCode(event)" >

<!-- Extension -->
<div class="autohideMsgPopUp alert"> <ul> </ul> </div>
<div class="dance animation">
<img  style="height: 200; width: 200;" src="http://33.media.tumblr.com/38a415b04d1711eac3fcffc382359068/tumblr_mjck4sk85a1r2y7r9o1_r1_500.gif" class="decoded">
</div>


<div class="bird">
<img  style="height: 200; width: 200;" src="https://31.media.tumblr.com/a4817792e43a82fffcac1c9ba5cabaf5/tumblr_mtc5aiKwaI1svwlszo1_500.gif" class="decoded">
</div>


<!-- Unique Clean Design -->
<style>
.success ,.error{background:transparent !important;}
.autohideMsgPopUp {
  position: fixed;
  width: 100%;
  right:0;
  padding: 4px 30px;
  bottom: -200px;
  z-index:2000;
  transition: bottom .5s ease-in-out;

    background: #87cefa !important;
    background: rgba(135, 206, 250,0.7) !important;
    color: white !important;
    font-family: Lucida Console;
    font-size: 13px;
    text-align:right;
}

.autohideMsgPopUp.active { bottom: 0px;  right: 0;}
.autohideMsgPopUp.active.success {
   border-top: 1px solid green !important;
   box-shadow: 5px 5px 5px 5pxgreen;
 }
.autohideMsgPopUp.active.error {
   border-top: 2px solid red !important;
 box-shadow: 5px 5px 5px 5px red;
 }
 .autohideMsgPopUp li, .autohideMsgPopUp ul{display:block;list-style-type: circle;}
 .autohideMsgPopUp li b {padding-right: 5px;text-transform: capitalize;
}
 .autohideMsgPopUp li.success b{color:green;}
 .autohideMsgPopUp li.error b{color:red;}
.animation{ transition: all 1s ease-in-out 0s;}
.dance  {    
    bottom: -500px;
    height: 249px;
    left: 0;
    position: fixed;
    width: 49px;
    z-index: 10;
}
.dance.active {
  bottom: 116px;
}

select{
height: 28px;
width: 130px;
}
textarea:focus{
  border-color:#333;
}

.group-input textarea:focus {
    height: 400px !important;  
}
.group-input input,.group-input textarea,.group-input select{
width: 100%;
}

#share{
height: 80%;
width: 83%;
margin: 10px;
left: 10%;
top: 10%;
}

.container{width: 100%;height: 100%;}
.left{float: left;
height: 100%;
width: 80%;
}
.c_edit{ height: 100%;
    position: relative;
    width: 100%;
    overflow:hidden;}
.line-nums{
  font-size: 13px;
  line-height: 13px;
  padding: 10px 6px;
  font-family: monospace;
  background: #EEE;
  position: absolute;
  width: 30px;
  bottom: -10px;
  top: 0px;
  text-align: right;
  border-right: 1px solid #999;
  border-right: 0;
  line-height: 1.5;
}
textarea {
height: 100%;
overflow: auto;
line-height: 13px;
font-size: 13px;
border: 0px solid #999;
padding: 10px;
font-family: monospace;
display: block;
outline: none;
margin-left: 36px;
width: calc(100% - 41px);
height: calc(100% - 10px);
line-height: 1.5;
}
.sec{height:25px;}
.del {display:none!important;}
.round-icon{
  padding: 5px 8px 5px 8px;
  color: white;
 // border: 1px solid white;
   font-size: 17px;
  border-radius: 50%;
}
.round-icon:hover{
 // color: #87cefa;
 // border: 1px solid #87cefa;
    color:yellow;
}

.group-btn .btn{
min-height: 12px !important;
min-width: 61px !important;
padding: 5px 6px !important;
border-radius: 0 !important;
}
.hover-icon{text-align: right;}
.hover-icon button{
  background: transparent; border: 0;  
}

/***** ping menu ******/
.ping-menu{
  position: fixed;
  background:white;
  top: -148px;
  z-index: 3;
  border-bottom: 3px red solid;
  width: 100%;
  height: 150px;
  transition: all 0.3s linear;
}
.ping-menu:hover{top: 0px; }
.ping-menu:after{
    background: none repeat scroll 0 0 red;
    border-radius: 0 0 20px 20px;
    bottom: -10px;
    content: "";
    height: 10px;
    left: calc(50%);
    position: absolute;
    width: 69px;
}
.ileft , .iright{display: inline-block;}
.iright{float:right}
.ping-menu .sec {
  display: inline-block;
  margin: 2px;
  height: 97%;// calc(100% - 4px);
  width:150px;
  overflow:auto;
}
.ping-menu .sec p{ border-bottom:1px solid gray; padding: 5px;}
.ping-menu .sec li{ display:block;}
li, ol {
  list-style-type: decimal;
  padding: 5px;
  cursor: pointer;
}

.group-input .group span {
    padding-left: 6px;
    padding-right: 0;
    top: 7px;
}
.group-input input[type="radio"], .group-input input[type="checkbox"], .group-input textarea[type="radio"], .group-input textarea[type="checkbox"], .group-input select[type="radio"], .group-input select[type="checkbox"] {
    margin: 0 5px;
}
.sidebar-popup.right {    right: -500px; }
.table td {padding: 13px;}
.group-btn.horz.tool2 button {
  width: 35px;
  height: 27px;
}
i{cursor: pointer;}
/*tab*/
.tab .data > div{padding:0px;}
.tab .title {text-align: left; padding-left:10px;}
/*endtab*/

.top-progress-bar{
  position: fixed;
  top: 0px;
  border-bottom: 3px red solid;
  width: 0%;
  transition: width 1s ease-in-out;
  display:none;
}
.top-progress-bar.progress{
  display:block;
  width: 20%;
}
.top-progress-bar.complete{
  width: 100%;
}
.top-progress-bar.done{
}
.debug-icons span{
margin: 0 5px;
cursor: pointer;
}
#debug_res p{
  border-bottom: 1px dashed gray;
  padding: 7px 0;
  
  font-family: monospace;
  line-height: 1.5;
  font-size: 12px;
}
/******** take A rest Animation *************/

.takerest .round-btn{
    position: relative;
    z-index:1000;
    animation: 4s ease-in-out 10s normal none 1 running takerest-bounce;
}
.bird{
    position: fixed;
    top: 400px;
    z-index: 100;
    display:none;
}


.takerest .bird{
    z-index:100;
    display:block;
    animation: 10s ease-in-out 0s normal none 1 running takerest-fly;
}


/* Standard syntax */
@keyframes takerest-bounce {
    0%   {top: 0px; transform: rotate(-0deg);}
    5%   {top: 0px; transform: rotate(90deg);}
    95%   {top: 400px;}
    100%   { top: 400px; transform: rotate(180deg);}
} 


@keyframes takerest-fly {
    0%   {top: 400px; left:-100px;}
    5%   { transform: rotate(-45deg);}
    90%   {top: -22px; left:750px; rotate(0deg);}
    100%   {top: -122px; left:1000px;  transform: rotate(6deg);}
}

.NO_CODE{color:red}
.NO_SOLUTION{color:blue}
.COMPLETE{color:green}

.main .CodeMirror-code > div::after{ 
    background: yellow none repeat scroll 0 0;
    content: attr(data-content);
    display: none;
    padding: 0 5px;
    position: absolute;
    right: 14px;
    top: -19px;
    z-index: 2000;
}

.main .CodeMirror-code > div:hover::after{ 
    display: block;
}



.sqr_btn i{
    border: 1px solid white !important;
    float: none !important;
    font-size: 16px !important;
    padding: 7px 15px !important;
    text-align: centre !important;
}

li .sort{display:none;}
li.expanded .sort{ display:block;}

/***************  Making clenaer UI and Editors *****************/
.CodeMirror-linenumber{
  background: white !important;
  color: #0091ea !important;
}
.CodeMirror-linenumber:after{
  //content: "." !important;
}
.CodeMirror-gutters{
border:0px !important;
background: white !important;
}
.CodeMirror pre {
    padding: 0 4px 0 15px !important;
}
.tab.traditional .menu a{
    border-radius: 0 !important;
    color: black;
    padding: 4px 10px;
}

.new_cs{
    background: #87cefa;
    border-bottom: 1px solid #3e2723;
    color: white;
    font-size: 16px;
    height: 35px;
    padding: 5px;
}
.tab .menu a,.tab .menu a:hover { border:0 !important;}
.tab .menu a.active{ 
  border:1px solid gray !important;
  border-bottom-width: 0 !important;
  padding: 7px;
  z-index: 10;
  background:white;
}

.tut{
    background: white none repeat scroll 0 0;
    width: 100%;
    position: absolute;
    top: 31px;
    height: calc(100% - 31px);
    z-index: 0;
    display:none;
}
.tut.show{
    z-index: 10;
    display:block;
}


div.rectPopUP {
    background:white;
    height: calc(100% - 80px);
    left: 0;
    margin: 30px auto 50px calc(50% - 400px);
    position: fixed;
    top: 0;
    width: 801px;
    z-index: 47;
    display:none;
    border-width: 20px 2px;
    border-top-width: 0px;
    border-color: #87cefa;
    border-style: solid;
    }
   div.rectPopUP i {position: relative; font-size: 13px; top: 6px; float: right; margin-right: 20px; color: white;}
   div.rectPopUP i.fa-times{margin-right: 5px; }
  div.rectPopUP iframe{ 
      border: 0 none;
      margin: 0;
      padding: 0;
      height: calc(100% - 25px);
      width:100%;
  }
div.rectPopUP .head{ background:#87cefa;width:100%;height:25px;}

#short_desc,.title_bar{text-transform: capitalize;}
.ext_img{display:block;margin:0 auto;}

.powered-by-firepad{display:none!important}


</style>

<style type="text/css" media="screen">
</style>

<!----------------- --------------------------------- START OF CLEAN HTML --------------------------------------------------->
<!-- New Style progress bar -->
<div class="top-progress-bar"></div>

<!-- Start of Main UI design -->
<div class="container">
  <div class="confirmation"> </div>
  
  <!--  Start of top bar -->
  <div class="top new_cs">
          <!-- This is description -->
          <div class="sec"> 
          Problem #<span id="id">{{id}}</span>: <b><span id="name">{{name}} </span> </b>:<span id="short_desc">{{short_desc}} </span>
          </div>
          <!-- This is common bottom list -->
          <span style="border-right: 1px solid white; padding-right: 10px; position: fixed; right: 340px;top: 4px; z-index: 10;">
          <i class="round-icon fa fa-book" title="EditHelp" onclick="startNewColaboration();"></i>
          <i class="round-icon fa fa-book" title="Debug" onclick="showBook();"></i>
          <i class="round-icon fa fa-bug" title="Debug" onclick="showGdb();"></i>
          <i class="round-icon fa fa-pencil" title="Explain" onclick="showExplain();"></i>
          <i class="round-icon fa fa-key" title="License" onclick="setLicense();"></i>
         </span>
          <!-- button related to screen -->          
          <span class="editor-btn" style="position: fixed;right: 18px;top: 4px; z-index: 10;">
              <i class="round-icon fa fa fa-file-o" title="Create New" onclick="cleanCodeObj();autohideMsgPopUp('success',' Created a new file..');"></i>
              <i class="round-icon fa fa-save" title="Save" onclick="cancelAllSideBar();quickSave()"> </i>
              <i class="round-icon fa fa-code-fork" title="Fork" onclick="cancelAllSideBar();Fork();"></i>
              <i class="round-icon fa fa-wrench" title="Info" onclick="cancelAllSideBar();toggleClass('#savebox','show');"></i>
              <i class="round-icon fa fa-th-large " title="Browse" onclick="cancelAllSideBar();toggleClass('#browsebox','show');if(!isSearchDataExist){searchRefreash();}"></i>
              <!-- Screen tools -->
              <i onclick="cancelAllSideBar();toggleClass('#helpbox','show')" title="Useful Libs" class="round-icon fa fa-bank "></i>
              <i onclick="window.location.href = '/cleancode/{{id|add:"-1"}}/'; " title="Prev Problem" class="round-icon fa fa-chevron-left "> </i>
              <i  onclick="window.location.href = '/cleancode/{{id|add:"1"}}/'; " title="Next Problem" class="round-icon fa fa-chevron-right "></i>
              <i  onclick="toggleFullScreen(document.body)" title="click to toggle fullscreen" class=" round-icon fa fa-arrows-alt"></i>
         </span>
         <!-- tut btn -->
         <span class="tut-btn" style="position: fixed;right: 18px;top: 4px; z-index: 10;display:none;">
              <i class="round-icon fa fa-eye" title="quickView" onclick="showEye();"></i>
              <i class="round-icon fa fa-flash" title="Insert Template" onclick="$('#solution').val(STR_SOLUTION);"></i>
              <i class="round-icon fa fa-download" title="Reset Data" onclick="ResetSolution();"></i>
              <i class="round-icon fa fa-upload" title="Save Solution" onclick="SubmitSolution();"> </i>
         </span>
         <span id="process-icon" class="hide" style=" font-size: 15px;    position: absolute;    right: 415px;    top: -3px;    z-index: 20;"> Processing...<i  class="fa fa-spinner fa-spin"></i> </span>          
  </div><!-- End top bar -->
   
  <!-- Start bottom container which contains all Editor and panes.-->
  <div class="btm" style="height: calc(100% - 35px);">
        <!-- start of Left -->
        <div class="left" id="resizable" style=" width: calc(100% - 400px);  position: relative; float: left;">
            <!--Selection bar -->
            <div class="tool1" style="position: absolute;  right: 62px; top: 2px;}">
                <select id="language" name="language" onchange="onChangeLang()" >
                <option selected="selected" disabled="" value="" >Select Lang.</option>
                <option value="c">C</option>            
                <option value="cpp">C++</option>
                <option value="py">Python</option>
                <option value="java">JAVA</option>
                </select>
                <select id="template" onchange="onChangeTemplate()" name="template">
                    <option selected="selected" disabled="">Select Template</option>
                </select>              
            </div> 
            <!-- Run Icon -->
             <button class="round-btn btn1" title="Run" style="display: inline;height: 30px;position: absolute;right: 21px;top: 36px;vertical-align: middle;width: 30px;z-index: 10;" onclick="cancelAllSideBar();runProg();" > <i class="fa fa-play" style="padding-left: 3px;"></i> </button>
            <!-- Editor tabs -->
            <div class="editor" style="height: 100%; padding:0;">
                <div class="tab traditional">
                    <div class="menu " style="border-bottom: 1px solid gray;height: 28px; padding-top: 4px;">
                        <a targetid="1" href="javascript:void(0)" class="active"><span>MainFunc</span></a>
                        <a targetid="2" href="javascript:void(0)" class=""><span>CodeFunc </span></a>
                        <a targetid="3" href="javascript:void(0)" class=""><span>Input</span></a>             
                    </div>
                    <div class="data" style=" height: calc(100% - 28px);">
                        <div id="1" class="active">
                        <!--<div class="main"> <textarea id="main" value= {{ main}} placeholder="Write your Driver code Here"></textarea></div> -->
                            <div id="main"></div>
                        </div>
                        <div id="2" > 
                        <!--<div class="func"><textarea id="func" value={{ func}} placeholder="Write your Source Code Here "></textarea></div> -->
                              <div id="func"></div>
                        </div>
                        <div id="3" class="">
                        <!-- <div class=" input"> <textarea id="input" value={{ input}} placeholder="Write your program input here"></textarea></div> -->
                              <div id="input"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End of Editor tabs -->
        </div> <!-- End of left=-->
        
        <!-- start of Right Pane -->
        <div class="right" style=" height: 100%; width: auto; overflow:auto">
             <div id="output" style="height: calc(100%); overflow:auto; padding:5px;"> </div>
        </div><!-- end of right -->        
    </div><!-- End of bottom container -->
</div><!-- End of Main UI design --> 

<!-----------------------------------------  END OF CLEAN HTML ---------------------------------------------------->

<!-- -----------  E X T R A   P O P U P  D I V ------------------------------>

<!-- WinStylePopUp -->
<link href='http://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
<style>
  .win_style_pop_up button{background: white none repeat scroll 0 0; border: 1px solid #a0a0a0;color:#a0a0a0; margin-right: 22px; padding: 7px 14px;font-family:'Poiret One',cursive;font-size:20px;} 
  .win_style_pop_up button:hover{border: 1px solid #87cefa;color:#87cefa;}
</style>
<div class="win_style_pop_up" style="display:none;border: 0px solid red;height: 300px;position: fixed;top: calc(40% - 150px);width: 100%;z-index: 26;box-shadow: 0px 0px 5px gray; padding: 10px;background:white;">
    <div class="reldiv" style="position:relative;height:100%;width:100%">
    <div class="title" style="color: #87cefa;font-family: 'Poiret One',cursive;font-size: 40px; font-weight: bold;margin-left: 120px; margin-top: 7px;letter-spacing: 1.2px;">Title</div>
    <div class="desc" style="color: #a0a0a0;font-family:'Poiret One',cursive;font-size: 22px;margin-left: 125px;margin-top:5px;">This will be some description..</div>
    <div class="btns" style="position:absolute;bottom:15px;right:15px;">
       <button class="yes"> Yes got it!</button>
       <button class="no"> Please Do not do that! </button>        
    </div>
</div>

<!-- start of tutorial section -->
<div class="tut" id="tut">
<textarea placeholder="Looks like you didn't white any solution yet! Let's start writing about your code." name="solution" id="solution" style=" margin: 0;padding: 12px;height:100%;width:100%"> </textarea>
</div>

<!-- RIght Save Pane -->
<div style="background: white;  color: black; min-height: 100px; overflow-x: hidden;
    width: 411px;" id="savebox" class="sidebar-popup right box scrollbar"> 
  <!-- This is for Message -->
  <div class="group-btn horz text-only separated">
    <button onclick="Create();removeClass('#savebox','show')">Save</button>
    <button ng-click="AngularAjaxCommand('code','get',{},create_cb,'')">Reset</button>     
    <button onclick="removeClass('#savebox','show')">Close</button>
  </div>
<form name="saveForm" id="saveForm">
  <fieldset class="group-input">
    <legend>User Preference Setting </legend>
    <span>Select Theme:</span> 
    <select onchange="selectTheme()" id="select_theme">
    <option selected>default</option>
    <option>3024-day</option>
    <option>3024-night</option>
    <option>ambiance</option>
    <option>base16-dark</option>
    <option>base16-light</option>
    <option>blackboard</option>
    <option>cobalt</option>
    <option>eclipse</option>
    <option>elegant</option>
    <option>erlang-dark</option>
    <option>lesser-dark</option>
    <option>mbo</option>
    <option>mdn-like</option>
    <option>midnight</option>
    <option>monokai</option>
    <option>neat</option>
    <option>neo</option>
    <option>night</option>
    <option>paraiso-dark</option>
    <option>paraiso-light</option>
    <option>pastel-on-dark</option>
    <option>rubyblue</option>
    <option>solarized dark</option>
    <option>solarized light</option>
    <option>the-matrix</option>
    <option>tomorrow-night-bright</option>
    <option>tomorrow-night-eighties</option>
    <option>twilight</option>
    <option>vibrant-ink</option>
    <option>xq-dark</option>
    <option>xq-light</option>
    <option>zenburn</option>
</select>
  </fieldset>  
  <fieldset class="group-input">
    <legend>Please take sometime to save this form.</legend>
    <input type="text" name="name" placeholder="One Word Name" id="iname">
    <input type="text" name="short_desc" placeholder="OneLiner Desc" id="ishort_desc">
    <!-- WE ARE REMOVING ALL THESE AS WE DONT WANT TO MESH UP 
    <textarea cols="30" rows="10" name="full_desc"  ng-model="cur.full_desc" placeholder="Enter Full Desc"></textarea> 
    <textarea cols="30" rows="10" name="solution" ng-model="cur.solution"  placeholder="Enter Full solution Algo"></textarea>
    <span>level:</span><div class="group">
      <input type="radio" checked="" name="level" value="Easy"><span >Easy</span>
      <input type="radio" name="level" value="Medium"><span >Medium</span>
      <input type="radio" name="level" value="Hard"><span >Hard</span>
    </div>
    <span>language:</span>
    <select name="language">
      <option value="C">C</option>
      <option value="CPP">CPP</option>
      <option value="JAVA">JAVA</option>
    </select>
    -->
    <select name="topic" id="topic">
      <option  value="" >Select Topics</option>
      <option  value="Mathematics" >Mathematics</option>
      <option  value="StackAndQueue" >StackAndQueue</option>
      <option  value="DS" >DS</option>
      <option  value="ALGO" >ALGO</option>
      <option  value="String" >String</option>
      <option  value="Array" >Array</option>
      <option  value="Bit" >Bit</option>
      <option  value="DP" >DP</option>
      <option  value="Greedy" >Greedy</option> 
      <option  value="Backtrack" >Backtrack</option>
      <option  value="Recursion" >Recursion</option>
      <option  value="DivideConc" >DivideConCon</option>
      <option  value="LinkedList" >LinkedList</option>
      <option  value="Tree" >Tree</option>
      <option  value="Graph" >Graph</option>      
      <option  value="RealTime" >RealTime</option>
      <option  value="Funny" >Funny</option>
      <option  value="NP" >NP</option>
      <option  value="C" >C</option>
      <option  value="CPP" >CPP</option>
      <option  value="JAVA" >JAVA</option>
      <option  value="PYTHON" >PYTHON</option>
      <option  value="NULL" >NULL</option>
    </select>
  </fieldset>
</form>

</div><!-- End of Save Box -->

<!-- Start of Help PANE -->
<div style="background: white;  color: black; min-height: 100px; overflow-x: hidden;
    width: 411px;" id="helpbox" class="sidebar-popup right box scrollbar"> 
  <!-- This is for Message -->
  <div class="group-btn horz text-only separated">  
    <button onclick="removeClass('#helpbox','show')">Close</button>
  </div>
  <div class="help-item">
  <pre>
--------------------------------
1. Easy Access to Queue
--------------------------------
class Queue {
  Queue(); 
  void enq(int x);
  int deq();
  int peek() ;
  void print();
  bool isEmpty() ;
}
Use class TQueue for Template
--------------------------------
2. Easy to use Stack Class
--------------------------------
class Stack{
  Stack();
  void push(int x);
  int pop() ;
  int peek() ;
  int gettop();
  void print();
  bool isEmpty();
};
use TStack for template Class.
--------------------------------
3.Easy to use Tree
--------------------------------
struct node{
  int val;
  node *left;
  node *right;
};
node * newNode( int val);
node * sampleTree1();
void inorder(node *r);
void preorder(node *r);
void postorder(node *r);
void levelorder(node *r);
int height(node *r);
--------------------------------
4. Test Cases:
--------------------------------
void TEST_INT_TO_INT(int (*f)(int) );
void TEST_INTARR_TO_INT(int (*f)(int*,int) );
void TEST_INTARR_TO_STR(char* (*f)(int*,int) );
void TEST_STR_TO_STR(char* (*f)(char* ) );
void TEST_STR_TO_INT(int (*f)(char* ) );

  </pre>
  </div>

</div><!-- End of Help Box -->

<!-- Start of Browse PANE  -->
<div style="background: white; color: black; min-height: 100px; overflow-x: hidden;
    width: 397px;" id="browsebox" class="sidebar-popup box right scrollbar"> 
    <div class="menu" style="border-bottom: 1px solid gray;padding-bottom: 5px;margin-bottom: 5px;">
      <button id="btn"  title="Change view" style="padding: 5px;margin: 3px;" onclick="TreeViewtoggle(this)" class="treeview" ><i class="fa fa-sitemap" ></i></button> 
      <button id="btn" title="refresh" style="padding: 5px;margin: 3px;" onclick="searchRefreash();"> <i class="fa fa-spin fa-refresh"> </i> </button>
      <input id="treesearch" style="padding:6px; width: 200px; height: 29px;" name="query" placeholder="search">
      <button id="btn" title="hide" style="float: right; padding: 5px;margin: 3px;"  onclick="removeClass('#browsebox','show')"><i class="fa fa-sign-out"></i></button>
  </div>
  <!-- List View-->
  <div class="browseList" style="display:none" >
    <div class="group-btn horz text-only separated" style="position: absolute;top: -6px;right: 34px;">  
      <button id="btn" style="height: 33px;" onclick="PrevBrowseList()"><i class="fa fa-chevron-left"></i></button>    
      <button id="btn" style="height: 33px;"  onclick="NextBrowseList()"><i class="fa fa-chevron-right"></i></button>
    </div>    
    <table id="ListTable" class="table striped hover" ng-show="item_list" >
        <tr ng-repeat="item in item_list | orderBy:id:true| filter:query">
          <td> <span>#{{item.id}} <i>{{item.name}} </i></span>          
          <div class="group-btn horz text-only" style="margin: 0px; position: absolute; right:0;"><button  title="Download" ng-click="Download(item.id)"><i class="fa fa-download"></i></button><button title="Edit" ng-click="get_by_id(item.id)"><i class="fa fa-chain-broken fa-fw"></i></button><button title="Love it" ng-click="deleteItem(item.id)"><i class="fa fa-heart-o"></i></button><button title="Add to fev" ng-click="deleteItem(item.id)"><i class="fa fa-star-o"></i></button><button title="Delete" ng-click="delete(item.id)"><i class="fa fa-trash"></i></button></div>
          </td>
        </tr>
    </table>
  </div>
  <!-- Tree View -->
  <div class="treemenu" id="browseTree" > </div> 
</div><!-- End of Browse PANE -->

<!-- Start of Debugging PANE  // WE ARE NOT USING THIS FEATURE,,,
<div style="background: white; color: black; min-height: 100px; overflow-x: hidden;
    idth: 411px;" id="debug" class="sidebar-popup box right scrollbar"> 
    
    <div class="menu" style="border-bottom: 1px solid gray;padding-bottom: 5px;margin-bottom: 5px;">   
      <button id="btn" title="Attach" style="padding: 5px;margin: 3px;" onclick="$('#debug_res').html('');send_data('attach_gdb',$('#name').html().trim());"> <i class="fa fa-bug"></i> </button>
      <div class="debug-icons" style="display: inline-block;">
        <span title="Start Run" onclick="send_data('run_cmd','run');"><i class="fa fa-play"> </i> </span>
        <span title="Stop" onclick="send_data('run_cmd','quit');"><i class="fa fa-stop"> </i> </span>
        <span title="Backtrace" onclick="send_data('run_cmd','bt');"><i class="fa fa-bold"> </i> </span>
        <span title="Clear" onclick="$('#debug_res').html('')"><i class="fa fa-paint-brush"></i> </span>
      </div>      
      <button id="btn" title="hide" style="float: right; padding: 5px;margin: 3px;"  onclick="removeClass('#debug','show')"><i class="fa fa-sign-out"></i></button>
      <input id='debug_input' onkeypress="handle_enter(event);" style="height: 31px; width: 100%;padding: 5px;" />
  </div>
  <div class="debug_box">
     <div id="debug_res" style=" white-space: pre-line;"> </div>     
  </div>
</div>  End of debug PANE -->


<!-- Start of Share -->
<!-- Remove this comamnd to enable share 
<div class="popup-overlay"></div> 
<div id="share" class="popup animated fromTop">
  <span class="popup-exit"></span> 
  <div style="height:50px">
     <div class="group-input horz">
        <input id="s-id" type="text" name="text"  style="width: 538px;" disabled>
        <button class="btn" title="Copy" ng-click="" style="position: relative;top: -3px;">Copy code</button>
      </div>
     <div class="group-btn horz text-only tool2" style="position: absolute;top: 0px;right: 28px;">
        <button title="Download" ng-click=""><i class="fa fa-google"></i> Google</button>
        <button title="Share" onclick=""><i class="fa fa-facebook"></i> Facebook</button> 
        <button title="Share" onclick=""><i class="fa fa-twitter"></i> Twitter</button>           
      </div>
      
  </div>
  <div>
    <iframe src="/api/cleancode/92/view/" style="height: calc(100% - 50px);width: 100%;border:0;border-top: 1px solid gray;"></iframe> 
  </div>
</div>
-->

<!-- Start of Quick Look PANE -->
<div class="eye rectPopUP">
  <div class="head">
     <i class="fa fa-times" onclick="dismissEye()"></i>
  </div>  
  <iframe id="eyef"  src=""></iframe>
</div> <!-- End Quick Look-->

<!-- Start of online Terminal for GDB -->
<div class="gdb rectPopUP">
  <div class="head">
     <i class="fa fa-times" title="close" onclick="dismissGdb()"></i>
     <i class="fa fa-pause"  title="restart" onclick="startDebugging()"></i>     
     <i class="fa fa-stop" title="stop"  onclick="startDebugging()"></i>
     <i class="fa fa-play" title="start " onclick="startDebugging()"></i>     
  </div>  
  <iframe id="gdb" src=""></iframe>
</div><!-- End of Online Terminal -->

<!-- Start of Build Book PDF -->
<div class="book rectPopUP" style="max-height: 600px;">
   <div class="head">
     <i class="fa fa-times" title="close" onclick="dismissBook()"></i>
  </div> 
  <textarea  id="book" style="height: calc(100% - 50px);margin: 0;padding: 10px;width: 100%;">{
    'hello': 1,
    'hello2': [1, 2, 3],
    'hello3': {
        'hello4': [1, 2, 3]
    },
    'hello5': [{
        'h55': [1, 2]
    }, {
        'h56': [1, 2, 3]
    }]
}</textarea>
   <div class="head" style="top: 26px;">
     <div class="sqr_btn" >
       <i id="action"  class="fa  fa-empire"  title="Download" style="float:right" onclick="buildBook()">Create Book</i>       
       <a id="dlink" class="sqr_btn" style="float:right" href="javascript: void(0)" target="_blank"> <i class="fa fa-cloud-download"  title="Download"> Download Book </i></a>
     </div>
     <i id="progress" style="margin-top: -21px; width: 10px !important; " class="fa fa-refresh fa-spin"></i>
  </div> 
</div> <!-- End of BOOK PDF -->

<!-------------------- E ND OF EXTENDED BLOCK ----------------------------------->


<!-- Code Mirror -->



</style>
<!--  Code Mirror setup and settings -->
<script type="text/javascript">      


</script>
<!--  Code Mirror setup and settings -->

<!-- End of code Mirror -->
<script type="text/javascript"> 
 
/************ G L O B A L V E R I A B L E ******************************************/
var editor_type ="CODE_MIRROR" //"ACE"
var editor_id_list=["main","func","input"]
var editors={'main':undefined,'func':undefined,'input':undefined}
var BASE_URL = ''              
var IS_SHELL_OPEN = false;


/*************** G L O B A L C O N S T  S T R I N G *********************************/
const NO_SOLUTION_MSG = "Looks like you didn't white any solution yet! Let's start writing about your code.";

const NEW_COLABOATION_POPUP_HEADER = "You are about to share your code !"
const NEW_COLABOATION_POPUP_HTML = "Code colaboration is a great thing when you are working as a group. It allow your friend to edit the same document the one you are editing right now. Copy this url:<span style='border:1px solid #87cefa;padding:2px 3px;font-family:monospace;font-size:12px;'>"+"TODO: Rpleace AlGFO"+"</span> and share with your friends."

const EXIST_COLABOATION_POPUP_HEADER = "Yupp! Your friend need your help !"
const EXIST_COLABOATION_POPUP_HTML = "Congrts! You received a colaboration request, where both of you can edit the same document simultaniouly. It will help you to understand the code in a better way."

const ENTER_LICENSE_POPUP_HEADER = "Wait a min! Do you have a license ?"
const ENTER_LICENSE_POPUP_HTML = "This is something where you need to have a licence to browse 1000+ practical coding questions, create your own save and delete. <input type='password' id ='lic' style='padding-left: 10px; font-size:15px; width:400px;border:0;border-bottom:1px solid gray;' placeholder='Enter your license' >"


/*######################### COMMON HELPER FUNC #######################################*/

/*********************** A L E R T ******************************/
function custom_alert(str){
  alert(str);
}
function custom_confirm(str) {
    x = confirm(str);
    return x;
}


/***********************  G E T  / L O A D  I D******************************/
function getID(){
   var id = 0;
   if ($("#id").html() != "0"){
     id = $("#id").html();
   }
   else{
        var url
        try {
             url= window.location.href
            var myRegexp = /.*\/cleancode\/(.*?)\/.*/g;
            id = myRegexp.exec(url)[1];
        }
        catch(err) {
            log('Id can bnot be retrived from url: '+url)
            id = '0'
        }

   }
   return id
}
function LoadID(id){
   get_by_id(id);
}
function reLoadId(){
   var id = getID();
   if (id != '0'){
     get_by_id(id);
   }
}

/************************* I N I T   C O D E M I R R O R  / C O D E A C E  *****************************/
function initCodeMirror(){
    editor_type = "CODEMIRROR"
    var init = function(){
         /**** Wrapper on code mirror ***/
        function autoFormat(editor) {
            var totalLines = editor.lineCount();
            var totalChars = editor.getTextArea().value.length;
            editor.autoFormatRange({line:0, ch:0}, {line:totalLines, ch:totalChars});
        }
        for (var key in editors) {
            if (editors.hasOwnProperty(key)) {
               editors[key] = CodeMirror.fromTextArea(document.getElementById(key), {
                    theme: "default",
                    lineNumbers: true,
                    matchBrackets: true,
                    mode: "text/x-c++src",
                    styleActiveLine: true,
                    autoCloseBrackets: true
                });
                autoFormat(editors[key]);
                 /***** Correct indentation  on Paste */
                editors[key].on("change", function(cm, change) {
                  if (change.origin != "paste" || change.text.length < 2) return;
                  cm.operation(function() {
                    for (var line = change.from.line, end = CodeMirror.changeEnd(change).line; line <= end; ++line)
                      cm.indentLine(line, "smart");
                  });
                });
          }
        } <!-- End of for -->
        loadCSSInline('.CodeMirror {height: 100%;}.CodeMirror-code > div{line-height: 1.8;}.CodeMirror-gutters {min-height:100% !important;z-index: 0;}');
        log('SUCCESS: Code Mirror Initilized properly......','',"Green")
    } <!-- End of Init -->
                
        <!-- TODO: We have to make a comon utility function to do this :
        /*
        var input = document.getElementById("select_theme");
        function selectTheme() {
          var theme = input.options[input.selectedIndex].innerHTML;
          editor_main.setOption("theme", theme);
          editor_func.setOption("theme", theme);
          editor_input.setOption("theme", theme);
        }*/
        -->
    
    lazyScriptLoading(["/media/js/codemirror.js","/media/js/clike.js","/media/js/python.js","/media/js/matchbrackets.js","/media/js/formatting.js","/media/js/closebrackets.js","/media/js/javascript.js","/media/js//foldcode.js"],init)
    loadCSS("/media/css/codemirror.css")
    
    var cssList=["http://codemirror.net/theme/3024-day.css",  "http://codemirror.net/theme/3024-night.css",  "http://codemirror.net/theme/ambiance.css",  "http://codemirror.net/theme/base16-dark.css",  "http://codemirror.net/theme/base16-light.css",  "http://codemirror.net/theme/blackboard.css",  "http://codemirror.net/theme/cobalt.css",  "http://codemirror.net/theme/eclipse.css",  "http://codemirror.net/theme/elegant.css",  "http://codemirror.net/theme/erlang-dark.css",  "http://codemirror.net/theme/lesser-dark.css",  "http://codemirror.net/theme/mbo.css",  "http://codemirror.net/theme/mdn-like.css",  "http://codemirror.net/theme/midnight.css",  "http://codemirror.net/theme/monokai.css",  "http://codemirror.net/theme/neat.css",  "http://codemirror.net/theme/neo.css",  "http://codemirror.net/theme/night.css",  "http://codemirror.net/theme/paraiso-dark.css",  "http://codemirror.net/theme/paraiso-light.css",  "http://codemirror.net/theme/pastel-on-dark.css",  "http://codemirror.net/theme/rubyblue.css",  "http://codemirror.net/theme/solarized.css",  "http://codemirror.net/theme/the-matrix.css",  "http://codemirror.net/theme/tomorrow-night-bright.css",  "http://codemirror.net/theme/tomorrow-night-eighties.css",  "http://codemirror.net/theme/twilight.css",  "http://codemirror.net/theme/vibrant-ink.css",  "http://codemirror.net/theme/xq-dark.css",  "http://codemirror.net/theme/xq-light.css",  "http://codemirror.net/theme/zenburn.css"]
    for (i = 0; i < cssList.length; i++) {
       loadCSS(cssList[i]);
    }
} <!-- End of initCodeMirror -->

function initACE(){
    editor_type = "ACE"
    var init = function(){
        for (var key in editors) {
           if (editors.hasOwnProperty(key)) {
            editors[key] = ace.edit(key)
            editors[key].setTheme("ace/theme/eclipse");
            var session =editors[key].getSession() 
            session.setMode("ace/mode/c_cpp");
            session.setUseWrapMode(true);
            session.setUseWorker(false);
            editors[key].container.style.lineHeight=1.5
            editors[key].setOptions({fontSize:"9pt"});          
          }
        }
        loadCSSInline('#main,#func,#input {height: 100%;width:100%;} .ace_gutter, .ace_gutter-cell {background: white !important;border-right: 0 !important;color: #87cefa!important;}');
        log('SUCCESS: ACE Editor Initilized properly......','',"Green")
    } <!-- End of Init -->
    
    <!-- Lets use this version of ACE to support firepad -->
    lazyScriptLoading(["https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"],init) 
}
function getEditorData(id){
 if(editor_type == 'ACE'){
    return editors[id].getValue()
 }
 else{
 return editors[id].getValue ; // code mirror
 }
}

function setEditorData(id,data){
 if(editor_type == 'ACE'){
    return editors[id].setValue(data)
 }
 else{
   return editors[id].setValue(data) // code moirror
 }
}
function setEditorMode(language){ // Seeting option to all editors..
    for (var key in editors) {
        if (editors.hasOwnProperty(key)) {
            x = editors[key]
            if(editor_type == 'ACE'){               
                    switch (language) { 
                      case 'c':
                          x.getSession().setMode("ace/mode/c_cpp");
                          break;
                      case 'cpp':
                          x.getSession().setMode("ace/mode/c_cpp");
                          break;
                      case 'java':
                          x.getSession().setMode("ace/mode/java");
                          break;
                      case 'py':
                          x.getSession().setMode("ace/mode/python");
                          break;
                    }
           } else{
                   switch (language) { 
                      case 'c':
                          x.setOption("mode", "text/x-c++src")
                          break;
                      case 'cpp':
                          x.setOption("mode", "text/x-c++src")
                          break;
                      case 'java':
                          x.setOption("mode", "text/x-c++src")
                          break;
                      case 'py':
                          x.setOption("mode", "text/x-cython")
                          break;
                    }
           }
        }
    }
}

function setEditorTheme(d1){ // Seeting option to all editors..
    for (var key in editors) {
        if (editors.hasOwnProperty(key)) {
            x = editors[key]
            if(editor_type == 'ACE'){
               x.setTheme(d1);
           } else{
                x.setOption("theme", d1); // oce mirror
           }
        }
    }
} <!-- End of SetEditor Theme -->

/*********************** L I C E N C E ******************************/
function setLicense() {
    
    function initLic(){
        var lic = $("#lic".val());
        if (lic != '') {
        eraseCookie('token');
        setCookie('token',lic,30);
        if(lic == getCookie('token')){
          autohideMsgPopUp('success',"Your License Set Successfully !");
          reLoadId();
          }
        else{
          autohideMsgPopUp('error',"Not able to set the license! Ensure that your browser is cookie enabled!");
        }
       }
    }
    showWinStylePopup(ENTER_LICENSE_POPUP_HEADER, ENTER_LICENSE_POPUP_HTML, 'confirm', 'Allow access!', 'Do not access right now!', initLic) 
    

}
/*********************** E X P L A I N  E D I T O R ******************************/
function showExplain(){
  toggleClass('#tut','show');
  toggleClass('.editor-btn','hide');
  toggleClass('.tut-btn','show');
  if($("#tut").hasClass('show')){
    //DD:
  }
}

/*********************** A U T O H I D E  P O P U P ******************************/
var autohideMsgPopUpTimeOut;
function autohideMsgPopUp(type,html,sec) {
  if (sec == undefined){ sec = 2;}
  if (type == undefined){ type = 'success';}
  if(type == 'error'){sec = 20;}
  else{sec= 4;}
  
  $(".autohideMsgPopUp ul").html('<li class="'+type+'"><b>'+type+'!</b>'+html+'</li>');
  if($(".autohideMsgPopUp").hasClass('active')){
    //already pop is dr.
    $(".autohideMsgPopUp").removeClass('active success error').addClass('active '+type);
    clearTimeout(autohideMsgPopUpTimeOut);
  }
  else{
    $(".autohideMsgPopUp").removeClass('active success error').addClass('active '+type);
  }
  autohideMsgPopUpTimeOut = setTimeout(function(){ $(".autohideMsgPopUp").removeClass('active');
  $(".autohideMsgPopUp").html('<ul></ul>') }, sec *1000);
}

/*********************** L O O K  P R E V I E W  ******************************/
function showEye(){
$(".container").css("opacity",0.15)
 $("#eyef").attr('src', '/cleancode/'+getUnifiedParams().id+"/look/");
 $(".eye").show();
}
function dismissEye(){
   $(".eye").hide();
   $(".container").css("opacity",1)
}


/*********************** G D B  ******************************/
function showGdb(){
$(".container").css("opacity",0.15)
 $(".gdb").show();
 if(IS_SHELL_OPEN == false){
    $("#gdb").attr('src', "http://shell.dipankar.ngrok.io");
    IS_SHELL_OPEN = true;
 }
}
function dismissGdb(){
   $(".gdb").hide();
   $(".container").css("opacity",1)
}
function startDebugging() {
    if($("#gdb").attr("src") != ''){
     document.domain = 'ngrok.io'
     butterfly = document.getElementById('gdb').contentWindow.butterfly;
     butterfly.send('cd /tmp/ \r');
     butterfly.send('clear\r');     
     butterfly.send('gdb ./'+getUnifiedParams().fname+'.exe \r');
    }      
}


/*********************** B U I L D  B O O K  ******************************/
function showBook(){
$(".container").css("opacity",0.15)
 $(".book").show(); 
}
function dismissBook(){
   $(".book").hide();
   $(".container").css("opacity",1)
}
function buildBook(){
  var config = $("#book").val();
 // console.log(config);
  $("#progress").show();
  $.get( "/api/cleancode/buildBooklet/", { config: config} )
      .done(function( data ) {
        $("#progress").hide();
        if(data.status =='success'){
        $('a#dlink').attr('href','/media/tmp/'+ data.fname);
        $('a#dlink i').css("color","green"); 
        $('#dlink').show();
        }
        else{
        alert( "ERROR # " + data.status +'::'+ data.fname  );      
        $('a#dlink').attr('href','javascript:void(0)')
        $('a#dlink i').css("color","red"); 
        }
      }
  );
}

/********************* WinStylePopUp *********************************************/
function showWinStylePopup(title, desc, type, yes_txt, no_txt, yes_cb, no_cb){
  var dismiss_me = function(){
     $(".win_style_pop_up").hide();
     $(".container").css("opacity",1)
  }
  $(".container").css("opacity",0.15)
  $(".win_style_pop_up .title").html(title);
  $(".win_style_pop_up .desc").html(desc); 
  $(".win_style_pop_up button.yes").html(yes_txt)
  $(".win_style_pop_up button.no").html(no_txt)
  if(yes_cb != undefined){
     $(".win_style_pop_up button.yes").click(function(){yes_cb();dismiss_me();})
  }
  else{
     $(".win_style_pop_up button.yes").click(dismiss_me)
  }
  if(no_cb != undefined){
     $(".win_style_pop_up buttn.no").click(function(){no_cb();dismiss_me();})
  }
  else{
    $(".win_style_pop_up button.no").click(dismiss_me)
  }    
  if(type != 'confirm'){
    $(".win_style_pop_up button.no").hide()
  }
   $(".win_style_pop_up").show()
}


/*********************** R E S I Z E   E D I T O R  ******************************/
//$( "#resizable" ).resizable({ handles: 'e, w'});

 
/*********************** C O L A B O R A T I O N  ******************************/

function ColaborationUtil(hash){
    furl = 'https://cleancode.firebaseio.com/firepads/'+hash 
    datapoint = { 'hash':hash,'furl':furl}
    function init(){            
        var furl = datapoint.furl;
        log('Colaboration Backend ID: '+furl)
        var firepadRef  = new Firebase(furl);
        if (editor_type=='CODEMIRROR'){
                var firepad  = Firepad.fromCodeMirror(firepadRef, editors['main'], {});
        }
        if (editor_type == 'ACE'){
                var firepad  = Firepad.fromACE(firepadRef, editors['main'], {});
        }
            window.location = window.location + '#' + datapoint.hash;
    }
    loadCSS("https://cdn.firebase.com/libs/firepad/1.1.0/firepad.css");
    lazyScriptLoading(['https://cdn.firebase.com/js/client/2.2.4/firebase.js', 'https://cdn.firebase.com/libs/firepad/1.1.0/firepad.min.js' ] ,init)
} <!-- end of ColaborationUtil -->

function joinAColaboration(){
    if(window.location.href.indexOf('#') != -1){
        var hash = window.location.hash.replace(/#/g, '');
        showWinStylePopup(EXIST_COLABOATION_POPUP_HEADER,EXIST_COLABOATION_POPUP_HTML , 'confirm', 'Start helping ...', 'I am Sorry :(', function(){ColaborationUtil(hash);})
    }
}

// Start a new collaboration with a fresh Hash Tag ..
function startNewColaboration(){
    var hash ;
    if(window.location.href.indexOf('#') != -1){  
       hash = window.location.hash.replace(/#/g, '');
    } else {
    // build a new hash,,
       hash  = getRandom();
    }    
    showWinStylePopup(NEW_COLABOATION_POPUP_HEADER, NEW_COLABOATION_POPUP_HTML, 'confirm', 'Try it out!', 'Let me thing again!', function(){ColaborationUtil(hash);}) 

}


/*************END COMMON HELPER FUNC************************************************/
  
/*------ Object getter and Setter : Unified ---------*/

function getUnifiedParams(){
  return {   
    'func':getEditorData('func'),
    'main':getEditorData('main'),  
    'input':getEditorData('input'),  
    'id':$("#id").html(),
    'name': $("#name").html(),
    'fname': $("#name").html().replace(/[^A-Z0-9]+/ig, ""), //basically a file name created at server side 
    'short_desc': $("#short_desc").html(),    
    'topic': $('#topic').val(), //  we can pass the arry by commna seperated string
    'language':$('#language').val(),
    'token': getCookie('token'),
    //Inheritance ..
    'compilation':(getEditorData('main').trim()=='')?'NO_CODE':'NO_SOLUTION',     
  }
}

function setUnifiedParams(o){
  if (o != undefined){
      //Normalised.
      o.func = (o.func==null)? '':o.func;
      o.main = (o.main==null)? '':o.main;
      o.input = (o.input==null)? '':o.input;
      o.id = (o.id==null)?'0':o.id;
      o.name = (o.name==null)?'':o.name;
      o.short_desc = (o.short_desc==null)?'':o.short_desc; 
      o.topic = (o.topic == null )?'':o.topic[0] // this is a Array.. take the first Elements
      o.language =(o.language == null )?'c':o.language;
      //Population...
      setEditorData('func',o.func)
      setEditorData('main',o.main)
      setEditorData('input',o.input)
      
      $("#id").html(o.id); 
      $("#name").html(o.name); 
      $("#short_desc").html(o.short_desc);     
      $('#topic').val(o.topic)
      $('#language').val(o.language)
      $("#iname").val(o.name); 
      $("#ishort_desc").val(o.short_desc);             
      autohideMsgPopUp('success',' Cloning the code..');
  }
  else{
      setEditorData('func','')
      setEditorData('main','')
      setEditorData('input','')
      $("#id").html('0'); 
      $("#name").html('Sample99'); 
      $("#short_desc").html('Sample Program');
      $("#iname").val('Sample99'); 
      $("#ishort_desc").val('Sample Program');   
      $("#language").val('c')      
      autohideMsgPopUp('success',' Cleaning the editor..');
  }
}

function cleanCodeObj(){
  o = getUnifiedParams();
  if(o.main =='' && o.func =='')
  {
    setUnifiedParams();return;
  }
  var r = confirm("Are You Sure to clear the code ?");
  if (r == true) {
    setUnifiedParams();
  }
  autohideMsgPopUp('success',' Code Editor cleaned');
}

/*------ END Object getter and Setter ---------*/

/*--- start Editor releted styling ----*/
function heighlightErrorInEditor(data){
   $( ".main .CodeMirror-code > div").css('background','white');   
   for ( i = 0;i<data.length;i++){
     // test if the error in main file.
     //if( data[i][0].indexOf($("#name").html()) == -1)
     //  continue;
     // test if this is a waring..
     target = $( ".main .CodeMirror-code > div:nth-child("+(parseInt(data[i][1])-1)+")" )
     if( data[i][3].indexOf("warning") > -1) {
       $( ".main .CodeMirror-code > div:nth-child("+(parseInt(data[i][1])-1)+")" ).css('background','#FAFAD2')
     }
     else if( data[i][3].indexOf("error") > -1) {
     // test this is an error
      $( ".main .CodeMirror-code > div:nth-child("+(parseInt(data[i][1])-1)+")" ).css('background','#FF8C00')
     }
     //$( ".main .CodeMirror-code > div:nth-child("+(parseInt(data[i][1])-1)+")::after").css('content',data[i][4]);
      target.attr('data-content',data[i][4]);
   }
}
function removeHeighlightErrorInEditor(){
  $( ".main .CodeMirror-code > div").css('background','white');
  $( ".main .CodeMirror-code > div").attr('data-content','');
}
/* End of Editot related styling ---*/


/* --- basic Commands: for Compile Run Etc -----------*/
function runProg(){
    command('compile',function (){command('run')});
}
function extractMetaInfo(data){
  meta={}
  meta.main=''
  meta.depends=''
  temp = data.split('\n')
  var h_flag = 1;
  for (i = 0; i < temp.length; i++) {
    if( h_flag ==1 ){  // if it is a meta tag
       if(temp[i].indexOf("$DEPENDS") == 0){
	    meta.depends += temp[i].replace("$DEPENDS",'')+' '
	   }
	   else if(temp[i].indexOf("$NEW") == 0 ){
	   //DO That
	   }
	   else{
	   h_flag = 0; //stop processing the meta tag
	   meta.main += temp[i] +'\n'
	   }
	}
	else {
		meta.main += temp[i] +'\n'
	}
  }
  // Replace space by commma
  meta.depends = meta.depends.replace(/\s\s+/g, ' ').trim().split(" ").join(",");
  return meta;
}
function command(action,success_cb){  
  var name= $("#name").html().replace(/\s+|\s+$/gm,''); // We Remove all white space here
  var o = getUnifiedParams();
  var func = o.func
  
  var input = o.input  
  var language=o.language
  // get the meta infomation..
  var meta = extractMetaInfo(o.main)
  var main = meta.main
  var depends =meta.depends
  var url =''  
  if (action=="compile"){ url = '/api/cleancode/compile/';$('#output').html('<pre> >>> Compiling...</pre>') }
  else if(action=="run"){ url = '/api/cleancode/run/';$('#output').append('<pre> >>> Running...</pre>') }
  else if (action=="perf"){ url = '/api/cleancode/perf/' }
  else{ url = '/api/cleancode/invalid/' }
  
  $.ajax({ 
    url: url,
    type: 'post',
    data: { "name":name,"main": main,"func":func, "input": input,'language':language,'depends':depends },
    contentType: 'application/x-www-form-urlencoded; charset=utf-8',  
    processData: true,
    success: function( data, textStatus, jQxhr ){
      $(".top-progress-bar").addClass("complete")            
      if (action=="compile"){
        removeHeighlightErrorInEditor(); // remove previous erros...
        $('#output').append('<pre style="padding-left: 35px;">'+data['output']+'</pre>');
        if( data['formated_error'] != undefined){
          //console.log(data['formated_error'])
          heighlightErrorInEditor(data['formated_error']);// alwas show any waring or error.
        }
        if(success_cb!= undefined  && data['can_run'] =='yes'){
          success_cb();
        }
      }
      if (action=="run"){
        $('#output').append('<pre style="padding-left: 35px;">'+data['output']+'</pre>');
        $('#output').append('<br><pre style="padding-left: 35px;">Unexptected Output? <span onclick="showGdb();"><b><i>Debug now!</i></b></span>  </pre>');
        if( data["stderr"]==""){ 
           startDance();                 
         }
      }
      $("#process-icon").addClass("hide");
    },
    error: function( jqXhr, textStatus, errorThrown ){
            console.log('error')
            $(".top-progress-bar").addClass("complete")
          }, 
    done: function(){  console.log('done') },
    fail: function(){   console.log('failed')  },
    complete:function(){
            setTimeout(function(){
            $(".top-progress-bar").removeClass("progress complete done");
            },1000);           
          },
    beforeSend:function(){
       $(".top-progress-bar").addClass("progress")  
       $("#process-icon").removeClass("hide")     
      },
      
    //We might have a Progress bar ..
    xhr: function() {
        var xhr = new window.XMLHttpRequest();
        xhr.upload.addEventListener("progress", function(evt) {
            if (evt.lengthComputable) {
                var percentComplete = evt.loaded / evt.total;
                //Do something with upload progress here
            }
       }, false);
       xhr.addEventListener("progress", function(evt) {
           if (evt.lengthComputable) {
               var percentComplete = evt.loaded / evt.total;
               console.log(percentComplete);
           }
       }, false);
       return xhr;
    },
  });
}
/* ---End basic Commands --------*/

/* ----- Common Operations ----- */

function cancelAllSideBar(){ /* remove all side bar */
  $(".sidebar-popup").removeClass("show");
}

/* --- End Common Operations ---*/


/* ----- Database Operation using Ajax -----*/
  var cur ={};
  var item_list ={}
  var limit =10;  
  var serch_cur_page = 1;
  
  function draw_cur(cur){
  //let's draw..
  }


  // We have Custom Ajax Comamnd 
  AngularAjaxCommand = function(model,action,param,cb_success,cb_error){ 
    var url =''
    var type='post'
    // var  param=merge(getUnifiedParams(),param); <<<< DO NOT DO IT>
    /* TODO: We can support many more */
    if (action=="getall"){ url = '/api/'+model+'/?page='+param.page+"&limit="+param.limit+"",type='get' }
    else if (action=="treegetall"){ url = '/api/'+model+'/',type='get' }
    else if (action=="get"){ param=getUnifiedParams(); url = '/api/'+model+'/'+param.id+'/',type='get' }
    else if (action=="get_by_id"){url = '/api/'+model+'/'+param.id+'/'; type='get' }
    else if(action=="create"){ param=getUnifiedParams(); url = '/api/'+model+'/' }
    else if(action=="update"){ param=getUnifiedParams();url = '/api/'+model+'/'+param.id+'/'; }
    else if(action=="update_specific"){ url = '/api/'+model+'/'+param.id+'/';type='post';} // update any specific data having an id.
    else if (action=="delete"){ url = '/api/'+model+'/'+param.id+'/' ;var type='delete'}
    
    else if (action=="download"){ url = '/api/cleancode/'+param.id+'/download/' ;var type='get'}
    else{ url = '/api/cleancode/invalid/' }  

    // Some extra Parameters always would be .. like token 
    param['token']=getUnifiedParams().token
    
          /*Ajax call is here */
          $.ajax({ 
            url: url,
            type: type,
            data: $.param(param),
            contentType: 'application/x-www-form-urlencoded; charset=utf-8',  
            processData: true,
            success: function( data, textStatus, jQxhr ){
              if (data.status!='error' &&  cb_success != undefined){
                cb_success(data)
              }
              else{ autohideMsgPopUp( 'error',data.msg,5);}
            },
            error: function( jqXhr, textStatus, errorThrown ){
              autohideMsgPopUp('error','Some Network Error #'+errorThrown,5);
              if (cb_error != undefined){
                cb_error(textStatus)
              }
            } 
          });
          
          
  } //end of AngularAjaxCommand
  

  var create_cb =  function (d){
        if(d.status!='error'){
        //$scope.cur=d.res :Dipankar upadte
        autohideMsgPopUp('success',' Element Created/Updated..');
        }
        else{
          autohideMsgPopUp('error',d.msg,5);
        }
     } 
  
  //Populate BrowseList
  // ...Helpers..
  function resetUrl(i){
    window.history.pushState('page2', 'Title', '/cleancode/'+i+'/');
    }
   function Love(i){
    
    var win = window.open('/cleancode/'+i+'/iview/', '_blank');
    win.focus();
  }    
  // End of Helpers...

  function buildActionbtnHTML(i){
  return '<div class="group-btn horz text-only" style="margin: 0px; position: absolute; right:0;"><button title="Download" onclick="window.location.href=\'/api/cleancode/'+i.id+'/download/\'"><i class="fa fa-download"></i></button><button title="Edit" onclick="get_by_id('+i.id+');resetUrl('+i.id+')"><i class="fa fa-chain-broken fa-fw"></i></button><button title="Love it" onclick="Love('+i.id+')"><i class="fa fa-heart-o"></i></button><button title="Add to fev" onclick="Feb('+i.id+')"><i class="fa fa-star-o"></i></button><button title="Delete" class="del" onclick="Delete('+i.id+')"><i class=" fa fa-trash"></i></button></div>'
  }
  function buildListHTML(l){
  t =''
    for (i = 0; i < l.length; i++) {
     t+= '<tr >'
     t+= '   <td> <span>#'+l[i].id+' <i>'+l[i].name+'</i></span>'
     t+= buildActionbtnHTML(l[i])
     t+= '</td></tr>'
  }
  return t;
} 
  // BrowseList
  var browseList = function(page){
    cb= function(data){
        ////console.log(data)
        item_list = data.res.data;
        //build list 
        //console.log(item_list);
        $('#ListTable').html(buildListHTML(item_list));
        if (data.res.current_page !== undefined)
          serch_cur_page=eval(data.res.current_page)       
      }
    AngularAjaxCommand('code','getall',{'page':page,'limit':10},cb,'')
  }
  NextBrowseList=function(){browseList(serch_cur_page+1);}
  PrevBrowseList=function(){browseList(serch_cur_page-1);}
  
  //BrowseTree
  var browseTree = function(){  
      cb= function(data){
      vv = List2TagTree(data.res.data,'topic')
      var html = recur(vv,0)
      $("#browseTree").html(html)
    }
     AngularAjaxCommand('code','getall',{'page':1,'limit':1000},cb,'')
  }
  // list refresh 
  var isSearchDataExist =false;
  function searchRefreash() {
          isSearchDataExist = true;
          browseTree();
          browseList(1);
          autohideMsgPopUp('success',' Refreshed!! ');
  }
  
  //create an Item 
  var create= function(){
     function cb(d){
        if(d.status!='error'){
        cur=d.res;
        setUnifiedParams(cur);
        autohideMsgPopUp('success',' Saved ...');
        }
        else{autohideMsgPopUp('error',d.msg,5);}
     }     
    AngularAjaxCommand('code','create',{},cb,'')
  } 
  //update an entry
  var Update= function(){
     function cb(d){
        if(d.status!='error'){  cur=d.res; setUnifiedParams(cur);
        autohideMsgPopUp('success',' Saved...'); }
        else{autohideMsgPopUp('error',d.msg,5);}
     }          
    AngularAjaxCommand('code','update',{},cb,'')
  }
  //get an entry..  
  var get_by_id= function(id){
     function cb(d){
        if(d.status!='error'){
          cur=d.res;setUnifiedParams(cur)
          ResetSolution();
          autohideMsgPopUp('success',' Code is copied to editor.');
        }
        else{
          autohideMsgPopUp('error',d.msg,5);
        }
     }     
    AngularAjaxCommand('code','get_by_id',{'id':id},cb,'')
  }

  
  //Delete an Item 
  var Delete = function(id){
     function cb(d){
        if(d.status!='error'){
          //$scope.cur=d.res
          autohideMsgPopUp('success',' Code is deleted!');
        }
        else{
        autohideMsgPopUp('error',d.msg,5);
        }
     }     
    AngularAjaxCommand('code','delete',{'id':id},cb,'')
  }
  // Update or open Save Box.
  function quickSave(){
    if($("#id").html() =='0'){
      toggleClass('#savebox','show');
    }
    else{
      Update();
    }
  }
  //crete .. call from save box
  function Create() {
    var id = getUnifiedParams().id;
    if (id == 0){
      create();
   }
   else{
    Update();
   }
  }
  //fork
  function Fork(){
    if($("#id").html() =='0'){
      //console.log("Can't fork , Please save it before");
      autohideMsgPopUp('error',' Cant fork , Please save it before',5);
    }
    else{
      o = getUnifiedParams()
      t={'id':0,'name':o.name+'-Forked!', 'main':o.main,'func':o.func,'input':o.input,'topic':o.topic,'short_desc':o.short_desc  }
      setUnifiedParams(t)
      autohideMsgPopUp('success',' Fork Done! Please Save.');
    }
  }

//downlaod
function Download(id) {
  $.get('/api/cleancode/'+id+'/download/'); 
  autohideMsgPopUp('success','<b>succes!</b>'+'Download done!');
}
/************** Solution related API write **************************/
STR_SOLUTION = "Problem Description \n\
=================================\n\
\n\
\n\
**Follow-up Questions:**\n\
1.\n\
2.\n\
3.\n\
Solution #1: Native O(2^n)\n\
---------------------------------\n\
\n\
\n\
Solution #2: Efficient O(n^2)\n\
---------------------------------\n\
\n\
\n\
Solution #3: Tricky  O(n)\n\
---------------------------------\n\
\n\
\n\
TAG: <write about your tag like: windowTechnique, Puzzle, Geometry>\n\
SIMILAR: <100,200 etc>"
//update solution
function ResetSolution(id){
     if( $('#solution').val().length >=10 ){
         var r = confirm("Confrim Reset!");
         if (r == true){
             console.log('Restiing the solution...')
         } else {
            console.log('Cancel Reset the solution...')
            return;
           }
    }
     if(id == undefined){
       o = getUnifiedParams()
       id = o.id;
     }
     function cb(d){
        if(d.status!='error'){         
          // autohideMsgPopUp(''success', Solution Updated');
          sol = d.res.solution
          if(sol == null || sol.length < 10){ // min length is 10 
            $('#solution').val(STR_SOLUTION)
           // autohideMsgPopUp('success','Looks like you didn\'t write anything till now. Let\'s use this format!');
          }
          else{
            $('#solution').val(sol)
          }
        }
        else{ autohideMsgPopUp('error',d.msg,5);}
     }     
    AngularAjaxCommand('code','get_by_id',{'id':id},cb,'')
}

// get the solution
function SubmitSolution(){
     if($('#solution').val().trim().length < 10  ||  $('#solution').val().trim() == STR_SOLUTION.trim()) {
       autohideMsgPopUp('error','Please write something to submit! Please use this template !');
       return;
     }
     o = getUnifiedParams()
     if(o.id == 0) {
     custom_alert('please save it before submit. Did you see the ID is zero ?')
     return;
     }
     if ( custom_confirm("Do you realy want to submit?") == false) return;
     
     
     function cb(d){
        if(d.status!='error'){ autohideMsgPopUp('success',' Solution saved.'); }
        else { autohideMsgPopUp('error',d.msg,5); }
     }     
    AngularAjaxCommand('code','update_specific',{'id':o.id,'solution':solveUnicode($('#solution').val())},cb,'')
}
/* ----- Database Operation using Ajax -----*/


/****************** Tree Menu Js ************************/
var SORT_FLAG = 0; //sort flag can be 0,1,2,3
function sortList(li){
    ul = li.lastChild; // this is a ul
    var new_ul = ul.cloneNode(false);
    var lis = [];
    for(var i = ul.childNodes.length; i--;){
        if(ul.childNodes[i].nodeName === 'LI')
            lis.push(ul.childNodes[i]);
    }
    
    lis.sort(function(a, b){
       if (SORT_FLAG == 0){
         return parseInt(a.getElementsByClassName('id')[0].innerHTML , 10) - parseInt(b.getElementsByClassName('id')[0].innerHTML , 10);
         }
       else if (SORT_FLAG == 1){
         return parseInt(b.getElementsByClassName('id')[0].innerHTML , 10) - parseInt(a.getElementsByClassName('id')[0].innerHTML , 10);
         }
       else if (SORT_FLAG == 2){
         return b.getElementsByClassName('name')[0].innerHTML.localeCompare(a.getElementsByClassName('name')[0].innerHTML)
         }
       else if (SORT_FLAG == 3){
         return a.getElementsByClassName('name')[0].innerHTML.localeCompare(b.getElementsByClassName('name')[0].innerHTML)
         }
              
    });
    for(var i = 0; i < lis.length; i++)
        new_ul.appendChild(lis[i]);
    ul.parentNode.replaceChild(new_ul, ul);
    SORT_FLAG = (SORT_FLAG+1)%4;
}

function actionClassOnSiblingButNotThis(ele,cls,cond,action){
 var sib= ele.parentNode.childNodes
 for( i =0;i<sib.length;i++)
 {
   if( sib[i] != ele && $(sib[i]).hasClass(cond)){
     if(action=='toggle'){$(sib[i]).toggleClass(cls)}
     if(action=='add'){$(sib[i]).addClass(cls)}
     if(action=='remove'){$(sib[i]).removeClass(cls)} 
   }
 }
}
function recur(ll,level){
  var h='<ul>'
  ll.forEach(function(e) {
    var has_child = (e.hasOwnProperty('child') && e.child.length != 0)
    if (has_child){
      h+='<li class="has_child"  style="margin-left:'+level*18+'px;position:relative;">'
      h+='<i class="jstree-icon jstree-ocl"></i>'
      h+='<a onclick="actionClassOnSiblingButNotThis(this.parentNode,\'expanded\',\'has_child\',\'remove\');toggleClass(\'li\',\'expanded\',\'up\',this); " ><i class="fa fa-folder-open-o"></i> '+e.name+'</a>'
      h+='<div> <button class="sort" onclick="sortList(this.parentNode.parentNode)" style="position:absolute;right: 0; top:0;">4 way Sort</button></div>'
      h+= recur(e.child,1)
      h+='</li>'
    }
    else{
      h+='<li style="margin-left:'+level*18+'px">'
      h+='<i class="jstree-icon jstree-ocl"></i>'
      h+='<a> <i class="fa fa-file-o '+e.compilation+'"></i><span class="id">'+e.id+'</span><span class="name">-'+e.name+'</span></a>'
      h+='<div class="group-btn horz text-only" style="margin: 0px; position: absolute; right:0;"><button  title="Download" onclick="window.location.href=\'/api/cleancode/'+e.id+'/download/\'"><i class="fa fa-download"></i></button><button title="Edit" onclick="get_by_id('+e.id+');resetUrl('+e.id+')"><i class="fa fa-chain-broken fa-fw"></i></button><button title="Love it" onclick="Love('+e.id+')"><i class="fa fa-heart-o"></i></button><button title="Add to fev" onclick="deleteItem('+e.id+')"><i class="fa fa-star-o"></i></button><button title="Delete" class="del" onclick="Delete('+e.id+');$(this).closest(\'li\').addClass(\'hide\');"><i class="fa fa-trash"></i></button></div>' 
      h+='</li>' 
    }    
  });
  h += '</ul>'
  return h;
}

function List2TagTree(ll,target_field_name){
  temp={}
  ll.forEach(function(e) {
    fl =eval(e[target_field_name])
    if(fl.length ==0){ fl=['zUnKnown'] }
    fl.forEach(function(f) {
      if(temp.hasOwnProperty(f)){
        temp[f].unshift(e)
      }
      else{
      temp[f] =[]
      temp[f].unshift(e)
      }
    });
  });
  
  out=[]
  for( p in temp) {
  out.push({'name':p,'child':temp[p]})
  }
  out.sort(function(a, b){
      if(a.name < b.name) return -1;
      if(a.name > b.name) return 1;
      return 0;
  });
  return out;
}

/* ----- Unified call - direct from Query. ----- **/


/* ----- End Unified call - direct from Query. -----**/


/* Search on Tree menu : Search on ID , this basically a list if li based on data */
function serach(ID, data){
  jQuery(ID).each(function () {
        if (jQuery(this).text().search(new RegExp(data, "i")) < 0) {
            jQuery(this).hide();
        } else {
            jQuery(this).show()
        }
    });
}
jQuery("#treesearch").keyup(function () {
    var filter = jQuery(this).val();
    serach("#browseTree ul li",filter)
});

/*###################  E N D OF ACTUAL C O D E ##########################*/

/****************   S T A R T S C R E P T ****************************/

$( document ).ready(function() {  // all startup calls wouild be here...
    log( "document ready!" );
    //initCodeMirror();
    initACE();
    //ResetSolution(); // we should call this func when document loads.
    joinAColaboration();  
    //onChangeLang(); // Setting proper value in Code Mirror.
});

</script>
  




<!-- Start of code TEMPLATE -->
<script type="text/javascript"> 
  var TEMPLATE = function () {
    this.codeTemplateMapList={}
  };
  
  TEMPLATE.prototype.addTemplate = function (language,name,main,func,input) {
    var t = {language:language,name:name, func:func, main:main, input:input};
    if (this.codeTemplateMapList.hasOwnProperty(language)){
      this.codeTemplateMapList[language].push(t)      
    }
    else{
    this.codeTemplateMapList[language]=[]
    this.codeTemplateMapList[language].push(t)
    }
  };

  TEMPLATE.prototype.select_temp  = function (language,id) {
    var _t = this.codeTemplateMapList[language][id]
    _t.id =0
    setUnifiedParams(_t);
  };
  

  /*********************  Add Your Template Here ************************/
  var T = new TEMPLATE();

  T.addTemplate('c','hello1',
    '#include<stdio.h>\nint main(){\n    printf("Hello cleanCode!!! \\n");\n    return 0;\n}\n',
    '',
    ''); 
    
  T.addTemplate('c','hello2',
    '#include<stdio.h>\nint main(){\n printf("fact of %d is %d\\n",10,fact(10));\n return 0;\n}',
    'int fact(int a){\n    //Write your code here..\n}',
    '');

  T.addTemplate('c','input1',
    '#include<stdio.h>\nint main(){\n    int i;\n    float f;\n    char c[10];\n    \n    scanf("%d",&i);\n    scanf("%f",&f);\n    scanf("%s",c);\n    \n    printf("We read i= %d ;f= %f ;c= %s;",i,f,c);\n    return 0;\n}\n',
    '',
    '10\n10.55\nhello10');

    
  T.addTemplate('c','input2',
    '#include<stdio.h>\nint main(){\n    int i,n; char s[100]; \n    scanf("%d",&n);\n    for(i=0;i<n;i++){\n        fgets( s, 100, stdin );\n        puts(s);    \n    }\n    return 0;\n}\n',
    '',
    '3\nhello1 hello1\nhello2\nhello3');

    
  T.addTemplate('c','input3',
    '#include<stdio.h>\nint main(){\n  int n;\n  int *a =READ_INT_ARR(&n);\n  PRINT_INT_ARR(a,n); \n  return 0;\n}',
    '',
    '1 2 3 4 5 6 7  ');

  T.addTemplate('c','input4',
    '#include<stdio.h>\nint main(){\n  int **mat = READ_INT_2DARR(4,4);\n  PRINT_INT_2DARR(mat,4,4);\n  return 0;\n}',
    '',
    '10 20 30 40\n0   0  0  0\n10 10 10 10\n1   2  3  4');
    
  T.addTemplate('py','factorial',
    'def fact(i):\n  if(i==0):\n    return 1;\n  else:\n    return i*fact(i-1)\n\nprint fact(3)',
    '',
    '');
  T.addTemplate('py','trangle',
    '"Draw a Trangle"\ndef trangle(x):\n  for i in range(x/2+1):\n    print \' \'*(x/2-i),\n    print \'*\'*(2*i+1)\n\ntrangle(20)',
    '',
    '');
    
  T.addTemplate('py','Love',
    '"Draw a Trangle"\ndef love(x):\n  for i in range(x-1):\n     print \' \'*(x-i-1),\'*\'*(i*2+1),\' \'*(2*(x-i-2)+1),\'*\'*(i*2+1)\n  print \' \', \'*\'*((x*2-2)*2+1)\n  print \' \', \'*\'*((x*2-2)*2+1)\n  for i in range(((x*2-2)*2+1)): \n    print \'\', \' \'*i,\'*\'*((x*2-2)*2+1-2*i)\nlove(10)',
    '',
    '');

  T.addTemplate('cpp','hello World',
    '#include<iostream>\nusing namespace std;\nint main(){\n    cout<<"hello World";\n}',
    '',
    '');  
 T.addTemplate('java','HelloWorld',
    'public class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println("Hello, World");\n    }\n}\n',
    '',
    '');
 T.addTemplate('c','Custom:Single Linkedlist',
'#include "dlinkedlist.h"\nint main(){\n  int a[]={1,2,3,4,5,6,7,8,9,0};\n  snode *s = buildLinkedList(a,10);\n  print(s);\n}',
    '',
    '');
 T.addTemplate('c','Custom:Bits ops',
'#include "dbit.h"\nint main(){\n  show_bit(1023);\n}',
    '',
    '');
 T.addTemplate('c','Custom: dtest Example',
 '#include "dtest.h"\nint add(int n){\n  int sum=0;\n  for (int i=0;i<=n;i++)\n    sum+= i;\n  return sum;\n}\nint main(){\n  TEST_INT_TO_INT(add);\n}',
 '',
  '4\n1 1\n2 3\n10 55\n10 100');
  /*********  End of Temp Add ***********/
  // Event on Change Editor Language //
  function onChangeLang(){
    language= $("#language").val() ;
    
    // Populate correct Template
    if(T.codeTemplateMapList[language] == undefined) { $("#template").html('<option selected disabled>No template</option>');cleanCodeObj();return;}
    html='<option selected disabled>Select template</option>'
    for( i =0;i<T.codeTemplateMapList[language].length;i++)
    {
      html+= '<option value="'+i+'">'+T.codeTemplateMapList[language][i].name+'</option>'
    }
    $("#template").html(html)
    // Set the correct language in Editor Mode.. 
    setEditorMode(language);    
  }
  

  function onChangeTemplate(){
      language=$("#language").val()
      temp=$("#template").val()
      T.select_temp(language,temp);
      autohideMsgPopUp('success','<b>succes!</b>'+'Templete Code got copied');
  }
</script>
<!-- End of code TEMPLATE -->

<!-- ShortCuts -->
<script type="text/javascript"> 
$(document).ready(function () {
        $(document).keydown(
            function (event) {
                //console.log(event)
                if (event.keyCode == 120) {
                    //press F9 to Run....
                    runProg();
                }
                if (event.keyCode == 113) {
                    //Press F2 for save...
                    quickSave();
                }
                if (event.keyCode == 27) {
                    //Press ESC , hide all windows..
                    cancelAllSideBar();
                }
            }
        )
});  
  // Cross Browser CTRRL KEY Handaling ..
  //TODO
  function showKeyCode(e) {
    var keycode;
    if (window.event)
        keycode = window.event.keyCode;
    else if (e)
        keycode = e.which;

    // Mozilla firefox
    if ($.browser.mozilla) {
        if ((e.ctrlKey && keycode == 103)) {
            ctrlG();
            //disable default action 
            if (e.preventDefault) {
                e.preventDefault();
                e.stopPropagation();
            }
        }
    }
    // IE
    else if ($.browser.msie) {
        if ((window.event.ctrlKey && keycode == 103)) {
            ctrlG();
            //disable default action 
            window.event.returnValue = false;
            window.event.keyCode = 0;
            window.status = "Refresh is disabled";
        }
    }
    //chrome..
    else { 
        if(e.ctrlKey && e.keyCode == 103 ){
            ctrlG();
            //disable default action 
            event.returnValue = false;
            event.keyCode = 0;
            window.status = "Refresh is disabled";
            

        }
    }
    
  //if(e.ctrlKey && e.keyCode == 103 ){
  function ctrlG(){  
      var person = prompt("Enter ID:", "2");
      if (person != null) {
          window.location.href = '/cleancode/'+person +'/';
      }
  }

  }
</script>
<!-- End of ShortCuts -->


<script type="text/javascript"> 
function startDance(){
var urls=[
'http://cdn2.scratch.mit.edu/get_image/user/4627107_60x60.png?v=1419454134.13',
'http://33.media.tumblr.com/38a415b04d1711eac3fcffc382359068/tumblr_mjck4sk85a1r2y7r9o1_r1_500.gif',
'http://1.bp.blogspot.com/_CIoyrD4Epuo/TNPTt9lDsKI/AAAAAAAAAA4/wqcSDGiBHdY/s1600/Dancing+Weasel.gif',
'http://www.kizoa.com/img/e8nZC.gif',
'http://media.giphy.com/media/8aLQDT8BXSj7y/giphy.gif',
'http://www.netanimations.net/donkey%20guitar.gif',
'https://lh5.googleusercontent.com/-h-uvbnVhS-g/VM2JwBc_1rI/AAAAAAADA04/685MEZhUddM/w350-h350/gr27.gif'

],
u = urls[Math.floor(Math.random() * urls.length)]
$('.dance img').attr('src',u);
autohide('.dance',2);
}

function takerest(){
      $("body").addClass("takerest");
      setTimeout(function(){ $("body").removeClass("takerest");} ,20*1000);
      setTimeout(takerest,30*60*1000);
}
//Bird
$( document ).ready(function() {
setTimeout(takerest,30*60*1000);
})

</script>


<script type="text/javascript"> 
// binding...
RegisterEvent('keyup',"input[name='name']",function(){$("#name").html($("input[name='name']").val());})
RegisterEvent('keyup',"input[name='short_desc']",function(){$("#short_desc").html($("input[name='short_desc']").val());})

//view toggle 
function TreeViewtoggle(ele){
  var icon = $($(ele).find('i')[0])
  if($(ele).hasClass('treeview')){
    
    icon.removeClass('fa-list-ul').addClass("fa-sitemap")
    $(ele).removeClass('treeview')    
    $('.treemenu').hide()
    $('.browseList').show()    
  }
  else{
    icon.removeClass('fa-sitemap').addClass("fa-list-ul")
    $(ele).addClass('treeview')
    $('.browseList').hide()
    $('.treemenu').show()    
  }
}
</script>
</body>
