<html>
<head> 
<title> YY  Online Code Editor - Compile ,run ,share on-line.. </title>

  <!-- My Own Style Steet  -->
  <link rel="stylesheet" type="text/css" href="/media/css/reset.css"> 
  <link rel="stylesheet" type="text/css" href="/media/css/utils.css"> 
  <link rel="stylesheet" type="text/css" href="/media/css/font-awesome.min.css"> 
  <link rel="stylesheet" type="text/css" href="/media/css/animate.min.css"> 
  
  <link rel="stylesheet" href="https://cdn.firebase.com/libs/firepad/1.2.0/firepad.css" />
  
  <!-- Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
 
    <!-- Custom Css Starts -->
    <style>    
        /* Common */
        .box { border: 1px solid #ccc; box-shadow: 1px 3px 7px 0 #ddd;}
        .overlapTrnasition { display: block !important;  opacity: 0;  position: absolute; transition: opacity 0.7s ease-in-out 0s; z-index: 1;}
        .overlapTrnasition.active {z-index: 2; opacity: 1; }
        div{ box-sizing: border-box;}
        .fw{height:100%;width:100%;}
        .abs{position:absolute;} .rel{position:relative}
        
        /* Spacific */
        .container{width: 100%;height: 100%;}
        .stars i{margin: 3px; color:green;}
        input{ border:0; margin-left: 5px;  padding: 0px 2px;   width: 100%; text-align:center; font-size: 25px; color: #555; font-family: 'Ubuntu', sans-serif;}
        input:hover,input:focus{ border-bottom:1px solid #aaa; }
        
        *::-moz-placeholder {  color: #aaa }
        ::-webkit-input-placeholder { color: #aaa}
        :-moz-placeholder {  color: #aaa}
        ::-moz-placeholder {  color: #aaa}
        :-ms-input-placeholder { color: #aaa}
        select::-ms-expand { display: none;}
        
         select {   -webkit-appearance: none;    -moz-appearance: none;       border: 0 none;    text-overflow: "";    width: 16px;font-family	"Ubuntu",â€‹sans-serif}
        .dynamic_tab span{    border-right: 1px solid #ccc; padding: 4px 20px; margin: -2px;cursor: pointer;}
        .dynamic_tab span:hover{border-bottom: 3px solid #D8ECD8;} .dynamic_tab span.active{border-bottom: 3px solid green;}  
        .tab_body > div { width: 100%; height: 100%;display:none;}
        .tab_body > div.active {display:block}
        
        .editorial{ color: #555;font-size: 25px; font-family: 'Ubuntu', sans-serif; width:100%;height:100%;}
        .editorial .box{ border: 1px solid #ccc; box-shadow: 1px 3px 7px 0 #ddd; text-align: center;}
        .editorial .box p { margin-bottom: 10px;}
        #dynamic_tab2 span{  border-right: 0 none;    font-size: 23px;    padding: 4px 10px;}
        .run {  background: yellow ; border-bottom: 1px solid #ccc;   border: 1px solid #ccc;border-radius: 50%; padding: 8px 11px; position: absolute; right: 668px;top: 2px; z-index: 10;}
        .round_img{ border-radius: 50%; box-shadow: 0 0 10px #888;  height: 40px; width: 40px;margin: 10px 5px;}
        .round_icon{     border-radius: 50%;    box-shadow: 0 0 10px #888;    font-size: 15px;    margin: 10px 5px;    padding: 13px;}
        
        .chat_head{ color: #222; font-size: 16px; line-height: 1.5; margin-top: 5%;text-align:center;}
        .chat_head input{  border-bottom: 1px solid #999; font-size: 18px;    margin-top: 20px;  width: 200px;}
        
        .chat_body .row{width: 100%; border-top: 1px solid white; border-bottom: 1px solid rgb(204, 204, 204); margin-bottom: 3px; padding: 5px 0px; position: relative; min-height: 85px;background: white; }
        .chat_body .left {float: left; width: 65px;}
        .chat_body .left img{border-radius: 50%; height: 55px; width: 55px;}
        .chat_body .right{width: calc(100% - 80px); float: right; text-align: left; font-size: 12px;}
        .chat_body .right .name{font-weight: bold; letter-spacing: 1.5px;}
        .chat_body .right .msg{text-align: left;}
        .chat_body .right .time{position: absolute; right: 10px; top: 4px;}
        .chat_body .row.active {background: lightyellow ; border-bottom: 1px solid yellow; border-top: 1px solid yellow;transition: background border 1.5s linear;}
        
        .setting_popup {   background: white none repeat scroll 0 0;
    font-size: 17px;
    position: absolute;
    right: 14px;
    text-align: left;
    top: 38px;
    z-index: 5;}
    /*Code player */
    .codeplayer {position: absolute;width: 100%; background-color: gray; padding: 10px; bottom: 0px; z-index: 10; left: 0;}
    .codeplayer i{padding: 5px 10px;}

    </style> 
    <!-- Custom Css Ends -->
</head>

<body>

<!-- Extension -->
<div class="autohideMsgPopUp alert"> <ul> </ul> </div>
<div class="top-progress-bar"></div>
<div id="overlay" > </div> <!-- Overlay for popup-->
<div class="confirmation"> </div>  
<div class="run" onclick="runProg1()"><i class="fa fa-play"></i></div>


<!-- Page Layout Starts here -->
<div class="container" id="container">
  <div class="body" style="height: calc(100%);width:100%">
    <div class="left rel" style="float:left;width:calc(100% - 580px);height: 100%;">
        <div id = "dynamic_tab1" class="dynamic_tab"  style="border-bottom: 1px solid rgb(204, 204, 204); box-shadow: 1px 3px 7px 0px rgb(221, 221, 221); padding-top: 15px; height: 40px;">
            <span class="" data-target="notepad" style="float: right; border-left: 1px solid rgb(204, 204, 204); border-right: 0px none;" data-target="notepad">Notes</span>
            <span class="active" data-target="main_1">Tab 1</span>
            <span class="" onclick="addNewTab()" style="border:0;"><i class="fa fa-file-o"></i></span>
        </div>
        <div id ="tab_body1" class="tab_body rel" style="width: 100%; margin-top: 10px; height: calc(100% - 50px);">
            <div class="active" id="main_1"></div>
            <div id="notepad"><textarea style="width: 100%; height: 99%; border: 1px dashed rgb(170, 170, 170);"></textarea></div> 
        </div>
        <!-- Code player starts -->
        <div class="codeplayer"> 
                <div class="seekbar">
                    <div id="code-player-seekbar" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" aria-disabled="false" style="width: 762px;"><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 73.3%;"></div><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 73.3%;"></a></div>
                </div>
                <div class="buttons">
                    <span style="float:left">
                        <span id="play-button" onclick="gCodePlayer.start_playing();"> <i class="fa fa-play"></i> </span>
                        <span id="pause-button" onclick="gCodePlayer.pause_playing();" ><i class="fa fa-pause"></i></span>
                        <span id="replay-button" onclick="gCodePlayer.reply_playing();"><i class="fa fa-rotate-right"></i></span>
                        <span id="replay-button" onclick="gCodePlayer.start_recording();"><i class="fa fa-rotate-right"></i></span>
                        <span id="replay-button" onclick="gCodePlayer.stop_recording();"><i class="fa fa-rotate-right"></i></span>
                        <span class="play-time"><span class="play-time">0:07</span><span class="video-length">/ 0:10</span></span>
                    </span>
                    <span style="float:right"><span onclick="gCodePlayer.setSpeed(5);" ><i>5x</i></span><span onclick="gCodePlayer.setSpeed(2);" ><i>2x</i></span><span onclick="gCodePlayer.setSpeed(1);" ><i>1x</i></span></span>
                </div>
        </div>
        <!-- Code player ends -->
    </div>
    <div class="right" style="float:right;width:580px;height: 100%;position: relative;">
        <div class="box overlapTrnasition" id= "output_panel" style="width: 99%; height: 99%; padding: 20px 5px 5px; font-family: consolas; "> 
            <div id= "output" style="height:calc(100%); padding-top:30px; width:100%; overflow: auto;font-size: 13px; line-height: 1.5;"> </div>
            <span id="process-icon" style="position: fixed;right: 212px;top: calc(40% - 20px);display:none;"><i class="fa fa-refresh fa-spin fa-5x fa-fw margin-bottom"> </i><br><p id="run_state" style="font-size:19px;padding-top:15px;">Compiling...</p></span>
            <span id="no_network" style="position: fixed; right: 212px; top: calc(40% - 20px); font-family: ubuntu;"><i class="fa fa-bell-slash fa-5x fa-fw margin-bottom"><p style="font-size:19px;padding-top:15px;">No Internet</p> </i> <br></span>
            <span style="font-family: ubuntu; position: absolute; top: 10px; font-size: 23px; left: 36px;" id="close" onclick='$("#editorial").addClass("active");$("#output_panel").removeClass("active");'><i class="fa fa-close"></i></span>
        </div>
        <div class="editorial active overlapTrnasition" style="width:100%;height:100%;" id="editorial">
           <div class="box"  style="padding:10px; margin-bottom: 12px; height: 208px;">
             <p style=" margin-bottom: 20px; height: 26px;">
                <span style="float:right;padding-right: 10px;" onclick="jQuery.fn.switchClass('bounceIn','bounceOut','.setting_popup');"><i style="padding-left: 26px; font-size: 17px;"  class="fa fa-ellipsis-v"></i></span>
                <div class="setting_popup animated bounceOut">
                    <p><i class="fa fa-floppy-o"></i></p><p><i class="fa fa-share"></i></p><p><i class="fa  fa-envelope"></i></p>
                </div>
             </p>
             <p><span>#<span><span id="id">26972<span></p>
             <p> <input type="text" id="name" placeholder ="Write a Hello World Program"/></p>
             <p style="font-size: 14px;"> <span>Language: <select id="language" name="language" onchange="onChangeLangWithoutTemplate()" style="width:32px" > 
                    <option  selected="selected" value="c">C</option>            
                    <option value="cpp">C++</option>
                    <option value="py">Python</option>
                    <option value="java">JAVA</option>
                    <option value="js">JavaScript</option>
                </select> <span> | <span>  Level:  <select id="level" name="language" onchange="onChangeLang()" style="width:32px" > 
                    <option  selected="selected" value="easy">Easy</option>            
                    <option value="Midium">Midi</option>
                    <option value="hard">Hard</option>
                    <option value="advance">Advn</option>
                </select> <span> | <span> Categories : Basic <span>  </p>
             <p><span onclick="" class="stars"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star-half"></i><i class="fa fa-star-o"></i><i class="fa fa-star-o"></i></span></p>
           </div>
           <div class="box" style="height: calc(100% - 220px);">
                <div id="dynamic_tab2" class="dynamic_tab"  style="border-bottom: 1px solid rgb(204, 204, 204); height: 33px;">
                    <span class="active" data-target="main_1">Description</span>
                    <span class="" data-target="main_2">Reviews</span>
                    <span class="" data-target="Comments">Team</span>
                    <span class="" data-target="main_4">Similar</span>
                </div>
                <div id ="tab_body2" class="tab_body" style="width: 100%; height: calc(100% - 33px);">
                    <div class="active" id="main_1"></div>
                    <div class="" id="main_2">uu</div>
                    <div id="Comments" class=""> 
                        <div class="chat_head fw rel">
                            <div style="" >
                            <p> Work as a team! With this feature you can share your code to your team for review and edit! You can also chat with him easily! </p>
                                <p> <input type="text" id="user_name" placeholder ="Write your name!"/></p>
                                <p> <input type="text" id="share_id"  placeholder ="Enter share ID"/></p>
                                  <p><i class="round_icon fa fa-user-plus" onclick="start_colaboration(this);"></i></p>
                            </div>
                        </div>
                        <div class="fw chat_main" style="display:none">
                            <div id ="chat_body" class="chat_body" style="width: 100%; height: calc(100% - 32px); overflow: auto;">
                            </div>
                            <div class="chat_input" style="width: 100%; height: 30px;">
                                <textarea id="chat_input" style="width: 100%; height: 100%; border:0; border:1px solid #aaa;padding:4px;color: #555; font-family: 'Ubuntu',sans-serif; font-size: 22px;" placeholder="Tell something to the team!" > </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="" id="main_4">UU</div>
                </div>
           </div>
        </div>
    </div>
    
  </div>
</div>





    <!-- My Own Utls -->
    <script src="/media/js/jquery.min.js"></script>
    <script src="/media/js/utils.js"></script>
    <script src="/media/js/cleancode_data.js"></script>
    <script src="/media/js/cleancode.js"></script>

    
  <!-- Firebase -->
  <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>

  <!-- ACE and its JavaScript mode and theme files -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/theme-textmate.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
  <!-- Firepad -->

  <script src="https://cdn.firebase.com/libs/firepad/1.2.0/firepad.min.js"></script>


    <script>
  // Minimal Custom Script 
  /*******************  TAB OPERATION ******************************************/
  var selected_tab='main_1'
  function addNewTab(){
    idx  = ($("#dynamic_tab1").children().length-1)
    id  = 'main_'+ idx;
    $('<span class="" data-target="'+id+'">Tab '+idx+'</span>').insertBefore('#dynamic_tab1 span:last-child');$('<div id="'+id+'">'+idx+'</div>').insertBefore('.tab_body > div:last-child');
    gEditors.addEditor(id);
  }
  
  $("#container").on("click", "#dynamic_tab1 > span", function(){
        if( $(this).hasClass('active')) return;
        var id = $(this).attr('data-target');
        $('#dynamic_tab1 > span.active').removeClass('active')
        $(this).addClass('active');
        $('#tab_body1 > div.active').removeClass('active')
        $('#tab_body1 > div#'+id).addClass('active');
        selected_tab = id;
  });
    $("#container").on("click", "#dynamic_tab2 > span", function(){
        if( $(this).hasClass('active')) return;
        var id = $(this).attr('data-target');
        $('#dynamic_tab2 > span.active').removeClass('active')
        $(this).addClass('active');
        $('#tab_body2 > div.active').removeClass('active')
        $('#tab_body2 > div#'+id).addClass('active');
  });
  /*******************  Helper Function******************************************/
    function runProg1(){
        $("#editorial").removeClass('active');$("#output_panel").addClass('active');$("#no_network").hide();
        input = getData();
        if(gData.getData().language == 'js'){
           //we can direct execute javascript here..
        }
        else{
            codeExecution('compile',input, function(){if(CAN_RUN){codeExecution('run',input);}});
        }
    } 
    
    function onChangeLangWithoutTemplate(language){
    if( language == undefined) language = 'c'
    language= $("#language").val() ;
    switch(language){
        case 'c': data = '#include <stdio.h>\n#include <string.h>\n#include <math.h>\n#include <stdlib.h>\n\nint main() {\n\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */    \n    return 0;\n}\n';break;
        case 'cpp': data = '#include <cmath>\n#include <cstdio>\n#include <vector>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\n\nint main() {\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   \n    return 0;\n}\n';break;
        case 'py': data = "def test():\n    print 'Hello World'\n    # Write your code here\ntest()\n";break;
        case 'java': data = 'import java.io.*;\nimport java.util.*;\nimport java.text.*;\nimport java.math.*;\nimport java.util.regex.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n    }\n}';break;
        case 'js': data = "function sayHello(){\n    log('Hello World');\n}\nsayHello();"; break;
    }
    gEditors.setEditorData (selected_tab,data)     
    gEditors.setEditorMode(selected_tab,language);    
  }
  
  
  var chat = undefined
  function start_colaboration(x){
    share_id = $('#share_id').val()
    uname = $('#user_name').val();
    if(share_id == '' || uname == ''){
        openAutoHideMsgPopUp('<b>You must have a share_id / name to join a team.</b>')
        return;
    }
    var uid = "G0001" // This to be generated
    var firebase_url= 'https://cleancode.firebaseio.com/'
    share_id = "test_id_xyz" // Comment it
    $(".chat_head ").hide();$(".chat_main").show();
    
    
    chat = new ChatEngine(firebase_url,share_id);
    chat.joinChatRoom(uid,uname)
    chat.registerRecvMsgHandalar(function (a){
        if( chat.getUid() == a.uid){
            $('.chat_body').append('<div class="row"><div class="left" ><img src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/7/005/0a7/17f/1a966c7.jpg"></div><div class="right"> <p class="name"> '+a.name+'</p><p class="time">'+a.time+'</p><p class="msg"> '+a.msg+'</p></div></div>')
        } else {
            $('.chat_body').append('<div class="row s"><div class="left" ><img src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/7/005/0a7/17f/1a966c7.jpg"></div><div class="right"> <p class="name"> '+a.name+'</p><p class="time">'+a.time+'</p><p class="msg"> '+a.msg+'</p></div></div>')
        }
        ScrollButtom('chat_body');
        $($('.row').last()).addClassVolatile('active');
    });    
    chat.registerRecvNotificationHandalar(function (a,b){ log(a+'==>'+b)}) 
    chat.sendMessage('Hello How r u doing...')
    chat.sendNotification('typing');   
    
    //colaboration starts...
    var furl = 'https://cleancode.firebaseio.com/firepads/'+share_id
    var firepadRef  = new Firebase(furl);
    //var firepad  = Firepad.fromACE(firepadRef, gEditors.getEditor('main_1'), {});
    //// Create Firepad.
    editor = gEditors.getEditor('main_1')
      var firepad = Firepad.fromACE(firepadRef, editor, {
        defaultText: '// JavaScript Editing with Firepad!\nfunction go() {\n  var message = "Hello, world.";\n  console.log(message);\n}'
      });
  }
  function end_chat(){ chat.leaveChatRoom(); }
  function send_msg(msg){ chat.sendMessage(msg); $(".chat_body").animate({ scrollTop: $('.chat_body').height() }, "slow");}
  function start_typing(){ chat.sendNotification('typing'); }

 RegisterDataBindingOnEvent('keyup',"#chat_input",function(e){
        e = e || event;
        if (e.keyCode === 13 && !e.ctrlKey && $("#chat_input").val() != '') {
            chat.sendMessage($("#chat_input").val());
            $("#chat_input").val('')
        }
        return true;
 });
  /*********************************************************************************/

  var gEditors= undefined
  var gData = undefined
  var gCodePlayer = undefined
  /****************************** MAIN FUNTIONS ****************/
    $( document ).ready(function() { 
       gEditors = new MyEditor('main_1');  
       gEditors.setEditorTheme("main_1","twilight");
       gEditors.setEditorMode("main_1","javascript");
       
       gData =  new  MyDataBind(['id','name','language','level','categories']);
       
       gCodePlayer = new CodePlayer(gEditors.getEditor('main_1'));
    });
 </script>
  
  
  

</body>
</html>
